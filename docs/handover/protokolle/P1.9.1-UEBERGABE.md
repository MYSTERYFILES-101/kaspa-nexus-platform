# P1.9.1 - Signals PRO UI mit Tracking

## Datum: 2025-12-05

## Status: ABGESCHLOSSEN (UI fertig mit Mock-Daten, Backend ausstehend)

---

## Aufgabe

Erstellung der Signals PRO Seite mit komplettem Signal-Tracking System. Inkl. Performance-Tabelle pro Coin, Win Rates und Trailing-Historie.

## Aenderungen gegenueber Masterplan

| Alt (Masterplan) | Neu |
|------------------|-----|
| 3 Provider (Anthropic, Google, OpenAI) | 1 Provider: OpenRouter |
| KRC-20 Tokens (NACHO, KASPER, etc.) | BTC, ETH, KAS |

**Begruendung:**
- OpenRouter: Ein API Key fuer alle KI-Modelle
- BTC/ETH/KAS: Mehr Liquiditaet, bessere Daten, weniger Manipulation

## Features

### 1. Performance Stats (4 Karten)
- Signale gesamt
- Win Rate (%)
- Ø Profit (%)
- Aktuelle Serie (Streak)

### 2. Coin Performance Tabelle
| Spalte | Beschreibung |
|--------|-------------|
| Coin | BTC, ETH, KAS mit Icon |
| Signale | Anzahl gesamt |
| Wins | Gewonnene Signale |
| Losses | Verlorene Signale |
| Win Rate | Gewinn-Quote |
| Ø Profit | Durchschnittlicher Gewinn |
| GESAMT | Summenzeile |

**Zusaetzlich:**
- Beste Serie (z.B. "12 Wins in Folge (KAS)")
- Aktuelle Serie

### 3. Signal-Karten
Jedes Signal zeigt:
- Coin + BUY/SELL Badge
- Signal-ID + Timestamp
- Entry / Current / Stop Loss Preise
- TP Progress Bar (0-5 TPs)
- Confidence Bar mit Farbe (gruen/gelb/rot)
- Aktueller Gewinn/Verlust (unrealisiert/realisiert)

**Klickbar:** Oeffnet Trailing-Historie

### 4. Trailing-Historie (aufklappbar)
Zeigt jeden Event:
- TP Hit: "TP1 erreicht bei $99,500.00 (+2.1%)"
- SL Moved: "SL verschoben von $94,200 → $97,450"
- Closed: "geschlossen bei $72,100.00 (+6.9%)"

Mit Timestamp fuer jeden Event.

### 5. Take Profit Levels Info
5 Karten zeigen:
- TP1: +5-10% → SL auf Entry
- TP2: +15-20% → SL auf TP1
- TP3: +25-35% → SL auf TP2
- TP4: +40-55% → SL auf TP3
- TP5: +60-80% → SL auf TP4

### 6. BTC Status Indikator
Zeigt oben rechts:
- Gruen: "BTC stabil - Signale aktiv"
- Gelb: "BTC volatil - Vorsicht"
- Rot: "BTC -5% - Signale pausiert"

### 7. Filter
- Alle / Aktiv / Geschlossen

## Mock-Daten

5 Beispiel-Signale:
1. BTC BUY (aktiv, TP1 erreicht)
2. ETH BUY (aktiv, noch kein TP)
3. KAS BUY (geschlossen, WIN +17.5%, TP3 erreicht)
4. BTC SELL (geschlossen, WIN +2.7%, TP2 erreicht)
5. ETH BUY (geschlossen, LOSS -3.2%, kein TP)

Performance-Stats:
- BTC: 45 Signale, 84.4% Win Rate, +12.3% Ø Profit
- ETH: 32 Signale, 81.3% Win Rate, +9.8% Ø Profit
- KAS: 28 Signale, 89.3% Win Rate, +18.5% Ø Profit
- GESAMT: 105 Signale, 84.8% Win Rate, +13.2% Ø Profit

## TypeScript Interfaces

```typescript
interface TrailingEvent {
  type: 'tp_hit' | 'sl_moved' | 'closed';
  price: number;
  oldSL?: number;
  newSL?: number;
  tpLevel?: number;
  profit?: number;
  timestamp: string;
}

interface Signal {
  id: string;
  coin: 'BTC' | 'ETH' | 'KAS';
  type: 'BUY' | 'SELL';
  status: 'active' | 'closed';
  entryPrice: number;
  currentPrice: number;
  initialSL: number;
  currentSL: number;
  tp1-tp5: number;
  confidence: number;
  tpHit: number; // 0-5
  trailingHistory: TrailingEvent[];
  result?: 'win' | 'loss';
  finalProfit?: number;
  createdAt: string;
  closedAt?: string;
}

interface CoinStats {
  coin: string;
  signals: number;
  wins: number;
  losses: number;
  winRate: number;
  avgProfit: number;
}
```

## Dateien

| Datei | Aenderung |
|-------|-----------|
| src/app/signals/pro/page.tsx | KOMPLETT NEU (590 Zeilen) |
| messages/de.json | GEAENDERT (signalsPro Namespace) |
| messages/en.json | GEAENDERT (signalsPro Namespace) |

## TODO fuer Backend

1. **OpenRouter Integration:**
   - API Key in .env
   - Multiple KI-Modelle aufrufen
   - Konsens-Logik implementieren

2. **Datenbank:**
   ```sql
   CREATE TABLE signals (
     id UUID PRIMARY KEY,
     coin VARCHAR(10),
     type VARCHAR(4),
     status VARCHAR(10),
     entry_price DECIMAL(20,8),
     initial_sl DECIMAL(20,8),
     current_sl DECIMAL(20,8),
     tp1-tp5 DECIMAL(20,8),
     confidence INTEGER,
     created_at TIMESTAMP
   );

   CREATE TABLE signal_events (
     id UUID PRIMARY KEY,
     signal_id UUID REFERENCES signals(id),
     event_type VARCHAR(20),
     price DECIMAL(20,8),
     old_value DECIMAL(20,8),
     new_value DECIMAL(20,8),
     profit DECIMAL(10,2),
     created_at TIMESTAMP
   );

   CREATE TABLE user_signal_stats (
     user_id UUID REFERENCES users(id),
     coin VARCHAR(10),
     wins INTEGER,
     losses INTEGER,
     total_profit DECIMAL(10,2)
   );
   ```

3. **Trend-Scanner:**
   - 24/7 Ueberwachung von BTC, ETH, KAS
   - Trigger-Logik (Preis, Volumen, RSI, MACD)
   - BTC-Watching (pausiert bei -3%, -5%, etc.)

4. **Echtzeit-Updates:**
   - WebSocket fuer Live-Preise
   - Push-Notifications bei neuen Signalen

## Build-Ergebnis

```
✓ Compiled /signals/pro
HTTP 200 OK
```

Keine Fehler.

## Abnahmekriterien

- [x] Performance Stats (4 Karten)
- [x] Coin Performance Tabelle (BTC/ETH/KAS + GESAMT)
- [x] Best/Current Streak Anzeige
- [x] Signal-Karten mit allen Details
- [x] TP Progress Bar (0-5)
- [x] Confidence Bar
- [x] Trailing-Historie (aufklappbar)
- [x] Filter (Alle/Aktiv/Geschlossen)
- [x] Take Profit Levels Info
- [x] BTC Status Indikator
- [x] i18n (DE/EN)
- [x] Responsives Design
- [x] Build erfolgreich

---

**Erstellt von:** Claude Code
**Geprueft:** Build erfolgreich, HTTP 200
**Naechster Schritt:** OpenRouter + Backend Integration
