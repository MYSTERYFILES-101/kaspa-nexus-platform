# P1.2-FIX-4-PROTOKOLL: Token Liste Platzhalter

**Datum:** 2025-12-03
**Entwickler:** Claude (AI Assistant)
**Sprint:** P1 - Core Frontend

---

## Problem

Die Token-Liste zeigte "No tokens found" wenn der Indexer noch keine Daten hatte. Dies sah wie ein Fehler aus und war keine gute User Experience.

**Vorher:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ˜• No tokens found                 â”‚
â”‚  Try adjusting your search          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Loesung

Professioneller Platzhalter-State wenn Indexer synchronisiert:

**Nachher:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â° Indexer synchronisiert           â”‚
â”‚ Der Indexer synchronisiert gerade   â”‚
â”‚ historische Blockchain-Daten...     â”‚
â”‚ ðŸŸ¡ Synchronisierung laeuft          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technische Aenderungen

### TokenGrid Komponente (`TokenGrid.tsx`)

Neue Props hinzugefuegt:
```typescript
interface TokenGridProps {
  tokens: Krc20TokenWithPrice[];
  isLoading?: boolean;
  startRank?: number;
  isSearching?: boolean;      // NEU: Ob eine Suche aktiv ist
  isIndexerSyncing?: boolean; // NEU: Ob der Indexer synchronisiert
}
```

Neue Render-Logik:
1. `isLoading` -> Skeleton-Animation (wie vorher)
2. `tokens.length === 0 && isIndexerSyncing && !isSearching` -> Indexer Warning + 8 Skeleton-Karten
3. `tokens.length === 0` (mit Suche) -> "Keine Tokens gefunden"
4. `tokens.length > 0` -> Token-Karten anzeigen

### Indexer Warning Box
- Gelbes Warning-Icon mit Uhr
- Titel: "Indexer synchronisiert"
- Beschreibung: Erklaert warum keine Daten da sind
- Pulsierender Status-Indikator

### Skeleton Token-Karten
- 8 Stueck im Grid (2x4 auf Desktop)
- 50% Opacity fuer "geisterhaften" Look
- Pulsierende Animation
- Gleiche Struktur wie echte Token-Karten

### Token List Page (`page.tsx`)

Props an TokenGrid weitergegeben:
```typescript
<TokenGrid
  tokens={paginatedTokens}
  isLoading={isLoading}
  startRank={startRank}
  isSearching={!!searchQuery}
  isIndexerSyncing={!isLoading && tokens.length === 0 && !error}
/>
```

---

## i18n Erweiterungen

### Neue Keys (3 pro Sprache)

**DE:**
- `indexerSyncing`: "Indexer synchronisiert"
- `indexerSyncingDesc`: "Der Indexer synchronisiert gerade historische Blockchain-Daten..."
- `syncInProgress`: "Synchronisierung laeuft"

**EN:**
- `indexerSyncing`: "Indexer Syncing"
- `indexerSyncingDesc`: "The indexer is currently syncing historical blockchain data..."
- `syncInProgress`: "Sync in progress"

---

## Geaenderte Dateien

```
src/components/tokens/TokenGrid.tsx    # Neue Props + Indexer State
src/app/krc20/tokens/page.tsx          # Props an TokenGrid
messages/de.json                        # +3 Keys
messages/en.json                        # +3 Keys
```

---

## Build Output

```
Route (app)                              Size     First Load JS
â”” Æ’ /krc20/tokens                        4.59 kB         120 kB
```

Build erfolgreich ohne Fehler.

---

## Unterscheidung der Zustaende

| Zustand | `isLoading` | `tokens.length` | `isSearching` | `isIndexerSyncing` | Anzeige |
|---------|-------------|-----------------|---------------|-------------------|---------|
| Laden   | true        | 0               | false         | false             | 12 Skeleton-Karten (normal) |
| Syncing | false       | 0               | false         | true              | Warning + 8 Skeleton-Karten |
| Suche leer | false    | 0               | true          | *                 | "Keine Tokens gefunden" |
| Normal  | false       | >0              | *             | *                 | Token-Karten |

---

## Status

**ABGESCHLOSSEN**
