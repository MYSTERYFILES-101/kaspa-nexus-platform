# P1.9.3 - Trading Bot UI

## Datum: 2025-12-05

## Status: ABGESCHLOSSEN (UI fertig, Backend ausstehend)

---

## Aufgabe

Komplettes Redesign der Trading Bot Seite (`/signals/bot`). Der Bot fuehrt automatisch die Signals PRO aus - Entry, Take Profits und Stop Loss werden auf CoinEx gehandelt.

## Aenderungen gegenueber alter Seite

| Alt | Neu |
|-----|-----|
| Exchange: Binance (falsch) | Exchange: CoinEx (korrekt laut Masterplan) |
| Generische Platzhalter | Detaillierte Bot-Einstellungen |
| Keine Erklaerung | "So funktioniert der Bot" Sektion |
| Keine Trade Historie | Trade Historie Tabelle |

## Features

### 1. "So funktioniert der Bot" (4 Schritte)

| Schritt | Titel | Beschreibung |
|---------|-------|--------------|
| 1 | Signal empfangen | KI generiert BUY/SELL Signal |
| 2 | Entry ausfuehren | Bot oeffnet Position automatisch |
| 3 | Trade managen | Take Profits & Stop Loss anpassen |
| 4 | Exit ausfuehren | Position automatisch schliessen |

### 2. Unterstuetzte Coins

| Coin | Trading-Art |
|------|-------------|
| BTC | Spot |
| ETH | Spot |
| KAS | Spot + Futures |

### 3. Exchange Verbindung

- Exchange: **CoinEx** (empfohlen)
- Sicherheitshinweis: Geld bleibt auf CoinEx, nur Trade-Berechtigung noetig
- API Key Verbindung (UI vorbereitet)

### 4. Bot-Einstellungen (aus Masterplan Sektion 15)

| Einstellung | Optionen |
|-------------|----------|
| Einsatz pro Trade | $50 - $1,000 |
| Hebel (nur KAS) | x1, x3, x4, x5 |
| Max. offene Trades | 1-5 |
| Auto Take-Profit | An/Aus |
| Trailing Stop-Loss | An/Aus |
| Taegliches Verlustlimit | 10%, 20%, 30% |

### 5. Bot Status Dashboard

| Element | Beschreibung |
|---------|--------------|
| Status | Online/Offline Anzeige |
| Aktive Trades | Anzahl offener Positionen |
| Trades heute | Anzahl ausgefuehrter Trades |
| Profit heute | Tagesgewinn in USD |
| Start/Stop Button | Bot starten/stoppen |
| **Kill-Switch** | Notfall-Stopp - alle Positionen sofort schliessen |

### 6. Trade Historie Tabelle

| Spalte | Beschreibung |
|--------|--------------|
| Signal | Signal-ID (z.B. SIG-1245) |
| Coin | BTC/ETH/KAS mit Icon |
| Typ | BUY/SELL Badge |
| Entry | Einstiegspreis |
| Exit | Ausstiegspreis |
| TP erreicht | Fortschrittsanzeige (1-5) |
| Profit | Prozent + USD |
| Status | Aktiv/Geschlossen |

## Mock-Daten

3 Beispiel-Trades:
1. KAS BUY - geschlossen, +17.6%, TP3 erreicht
2. BTC BUY - aktiv, +1.8%, TP1 erreicht
3. ETH BUY - geschlossen, -3.2%, kein TP (Loss)

## Neue i18n Keys

### tradingBot Namespace

```json
{
  "title": "Trading Bot",
  "subtitle": "Automatisierte Ausfuehrung deiner AI-Signale",
  "unlockBot": "Schalte automatisches Trading mit Pro+ frei",
  "supportedCoins": "Unterstuetzte Coins",
  "howItWorks": { ... },
  "apiConnection": { ... },
  "settings": { ... },
  "status": { ... },
  "history": { ... },
  "comingSoon": { ... }
}
```

## Geaenderte Dateien

| Datei | Aenderung |
|-------|-----------|
| src/app/signals/bot/page.tsx | Komplett neu (540 Zeilen) |
| messages/de.json | tradingBot Namespace hinzugefuegt |
| messages/en.json | tradingBot Namespace hinzugefuegt |

## Sicherheitsfeatures (aus Masterplan)

| Massnahme | Beschreibung |
|-----------|--------------|
| Keine Funds bei uns | User-Geld bleibt auf CoinEx |
| Nur Trade-Permission | API Key ohne Withdraw |
| AES-256 Verschluesselung | Fuer API Keys (Backend) |
| Kill-Switch | Sofortiges Stoppen moeglich |
| IP-Whitelist | Optional (Backend) |

## Build-Ergebnis

```
âœ“ Compiled /signals/bot
HTTP 200 OK
```

Keine Fehler.

## Abnahmekriterien

- [x] "So funktioniert der Bot" Erklaerung (4 Schritte)
- [x] Exchange: CoinEx (nicht Binance)
- [x] Unterstuetzte Coins (BTC, ETH, KAS)
- [x] Bot-Einstellungen aus Masterplan
- [x] Bot Status Dashboard
- [x] Kill-Switch (Notfall-Stopp)
- [x] Trade Historie Tabelle
- [x] PRO+ Upgrade Banner
- [x] i18n (DE/EN)
- [x] Responsives Design
- [x] Build erfolgreich

## TODO fuer Backend

1. **CoinEx API Integration:**
   - API Key Verwaltung (AES-256 verschluesselt)
   - Trade Execution Endpoints
   - Position Management

2. **Signal-Bot Verbindung:**
   - WebSocket fuer neue Signale
   - Automatische Order-Erstellung
   - TP/SL Management

3. **Datenbank:**
   ```sql
   CREATE TABLE bot_settings (
     user_id UUID REFERENCES users(id),
     exchange VARCHAR(20),
     api_key_encrypted TEXT,
     trade_amount DECIMAL(10,2),
     leverage INTEGER,
     max_open_trades INTEGER,
     auto_tp BOOLEAN,
     trailing_sl BOOLEAN,
     daily_loss_limit INTEGER
   );

   CREATE TABLE bot_trades (
     id UUID PRIMARY KEY,
     user_id UUID REFERENCES users(id),
     signal_id UUID REFERENCES signals(id),
     coin VARCHAR(10),
     type VARCHAR(4),
     entry_price DECIMAL(20,8),
     exit_price DECIMAL(20,8),
     amount DECIMAL(20,8),
     profit_percent DECIMAL(10,2),
     profit_usd DECIMAL(10,2),
     tp_hit INTEGER,
     status VARCHAR(10),
     executed_at TIMESTAMP,
     closed_at TIMESTAMP
   );
   ```

---

**Erstellt von:** Claude Code
**Geprueft:** Build erfolgreich, HTTP 200
**Vorgaenger:** P1.9.2-UEBERGABE.md (Signals PRO Redesign)
