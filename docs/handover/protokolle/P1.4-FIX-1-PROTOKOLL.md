# P1.4-FIX-1-PROTOKOLL: Placeholder State fuer fehlende Daten

**Datum:** 2025-12-03
**Entwickler:** Claude (AI Assistant)
**Sprint:** P1 - Core Frontend

---

## Problem

Die Token Detail Seite zeigte einen Error-Screen wenn die API keine Daten zurueckgibt (weil der Indexer noch nicht synchronisiert ist). Dies war keine gute User Experience.

---

## Loesung

Professionelle Platzhalter-States anstatt Error-Screens:

### 1. Indexer Status Banner
- Gelbe Warning-Box oben auf der Seite
- Erklaert dass der Indexer synchronisiert
- Zeigt "Synchronisierung laeuft" mit Puls-Animation
- Hinweis dass dies einige Wochen dauern kann

### 2. Token Header
- Ticker wird immer angezeigt (aus URL)
- Logo zeigt Fallback mit ersten 2 Buchstaben
- Preis: Skeleton Animation wenn keine Daten
- Badge: "Daten werden geladen" statt Rang

### 3. Stats Grid
- Skeleton Animationen fuer alle 6 Werte
- Labels bleiben sichtbar
- Layout bleibt intakt

### 4. Price Chart
- Zeigt "Chart wartet auf Daten" statt "Coming Soon"
- Beschreibung bleibt gleich

### 5. Token Info
- Mint Progress: Pulsierender Platzhalter-Balken
- State: Skeleton statt leerem Wert
- Andere Werte: "-" oder Skeleton je nach Typ

### 6. Quick Stats Sidebar
- Skeleton fuer alle Werte
- Rang: "-" statt Skeleton

### 7. Top Holders
- Icon mit Puls-Animation
- "Halter-Daten werden indexiert..." Text

---

## Technische Aenderungen

### Token Detail Page (`page.tsx`)

```typescript
// Statt error state:
const [hasData, setHasData] = useState(false);

// PlaceholderValue Helper:
const PlaceholderValue = ({ children, showSkeleton = true }) => {
  if (hasData && children !== undefined && children !== null) {
    return <>{children}</>;
  }
  if (showSkeleton) {
    return <Skeleton className="h-6 w-20 inline-block" />;
  }
  return <span className="text-[var(--color-text-muted)]">-</span>;
};
```

### Entfernte Features
- Mock-Daten Fallback entfernt
- Error-Screen entfernt
- TokenHolder Import entfernt (nicht mehr verwendet)
- MOCK_HOLDERS Array entfernt

---

## i18n Erweiterungen

### Neue Keys (6 pro Sprache)

**DE:**
- `chartWaitingData`: "Chart wartet auf Daten"
- `holdersIndexing`: "Halter-Daten werden indexiert..."
- `indexerSyncing`: "Indexer synchronisiert"
- `indexerSyncingDesc`: "Der Indexer synchronisiert gerade historische Blockchain-Daten..."
- `syncInProgress`: "Synchronisierung laeuft"
- `dataLoading`: "Daten werden geladen"
- `waitingForData`: "Warte auf Daten"

**EN:**
- `chartWaitingData`: "Chart waiting for data"
- `holdersIndexing`: "Holder data is being indexed..."
- `indexerSyncing`: "Indexer Syncing"
- `indexerSyncingDesc`: "The indexer is currently syncing historical blockchain data..."
- `syncInProgress`: "Sync in progress"
- `dataLoading`: "Loading data"
- `waitingForData`: "Waiting for data"

---

## Geaenderte Dateien

```
src/app/krc20/tokens/[ticker]/page.tsx   # Komplett ueberarbeitet
messages/de.json                         # +7 Keys
messages/en.json                         # +7 Keys
```

---

## Build Output

```
Route (app)                              Size     First Load JS
â”” f /krc20/tokens/[ticker]               3.98 kB         114 kB
```

Build erfolgreich ohne Fehler.

---

## Visuelles Ergebnis

**Vorher:** Error-Screen mit "Token nicht gefunden"

**Nachher:**
- Indexer Warning Banner (gelb)
- Token Header mit Ticker sichtbar
- Stats Grid mit Skeleton-Animationen
- Chart Placeholder mit "Wartet auf Daten"
- Holders mit "Wird indexiert" Animation
- Alle Links zu externen Ressourcen funktionieren

---

## Status

**ABGESCHLOSSEN**
